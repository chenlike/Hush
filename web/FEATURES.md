# Hush Trading 前端功能说明

## 已实现功能

### 🔐 钱包连接
- 使用 RainbowKit 实现多钱包支持
- 支持 MetaMask、WalletConnect 等主流钱包
- 自动检测网络连接状态

### 📝 用户注册
- 一键注册账户
- 获得初始虚拟资金（10,000 USD）
- 注册状态实时显示

### 🔒 FHE 加密功能
- 集成 Zama FHE SDK
- 自动初始化 FHE 环境
- 支持 uint32 和 bool 类型加密
- 生成加密证明
- 失败重试机制

### 📊 交易功能
- **开仓功能**
  - 输入保证金金额
  - 选择交易方向（做多/做空）
  - FHE 加密保证金和方向
  - 生成加密证明
  - 调用智能合约开仓

- **平仓功能**
  - 显示用户持仓列表
  - 选择持仓 ID 进行平仓
  - 自动计算盈亏

### 💰 余额管理
- 显示加密余额状态
- 余额使用 FHE 保护，无法直接查看
- 实时更新余额信息

### 🎨 用户界面
- 现代化 UI 设计
- 响应式布局
- 暗黑模式支持
- 状态提示和错误处理
- 使用说明和帮助信息

### 📈 价格显示
- 实时显示 BTC 价格
- 从价格预言机获取数据
- 价格更新状态监控

## 技术栈

- **前端框架**: React Router + Vite
- **钱包连接**: RainbowKit + Wagmi
- **FHE 加密**: Zama FHE SDK
- **UI 组件**: shadcn/ui + Tailwind CSS
- **状态管理**: React Hooks
- **合约交互**: Wagmi Hooks

## 合约集成

### 已集成合约
1. **Trader 合约** (`0xb8b228e6524561ba3e5653be97f1a44700f325b0`)
   - 用户注册
   - 开仓/平仓
   - 余额管理
   - 持仓查询

2. **Price Oracle 合约** (`0x8013bf7a8654f81d18ac99cd2776a4aa02eb6ff7`)
   - BTC 价格获取
   - 价格更新状态

3. **Reveal Storage 合约** (`0xe2a799237021eb1b0473b294d4bf7440135ffecd`)
   - 余额公开存储

## 安全特性

### 隐私保护
- 所有交易数据使用 FHE 加密
- 保证金和交易方向完全加密
- 余额信息不可直接查看
- 支持余额公开验证

### 错误处理
- FHE 初始化失败处理
- 网络连接错误处理
- 合约调用错误处理
- 用户友好的错误提示

## 部署配置

### 环境变量
- `NEXT_PUBLIC_WALLET_CONNECT_PROJECT_ID`: WalletConnect 项目 ID
- 合约地址已硬编码在配置文件中

### 网络支持
- 当前支持 Sepolia 测试网
- 可扩展支持其他网络

## 使用流程

1. **连接钱包**: 点击右上角连接按钮
2. **注册账户**: 连接钱包后点击注册
3. **等待 FHE 初始化**: 系统自动初始化 FHE 环境
4. **开仓交易**: 输入保证金和选择方向，点击开仓
5. **查看持仓**: 在平仓区域查看当前持仓
6. **平仓**: 选择持仓 ID 进行平仓

## 注意事项

- FHE 初始化需要一定时间，请耐心等待
- 确保钱包连接到正确的网络（Sepolia）
- 开仓功能需要 FHE 初始化成功
- 所有交易数据都经过加密处理
- 当前为演示版本，实际使用需要完善错误处理 